
#### Любой докерфайл начинается с инструкции `FROM` -  эта команда устанавливает базовый образ

#### Возможно использование `LABEL` (меток) 

#### Конструкция  `RUN` используется для выполнения команд в контейнере

#### Команды `ADD` или команда `COPY` используются для копирования с рабочей директории в директорию образа
Пример команды копи

`COPY /opt /app` -  сначала идет <откуда копируем> <куда копируем>


#### Инструкция `WORKDIR` позволяет установить рабочий каталог

####  Инструкция `EXPOSE` используется чтобы сказать какой порт по дефолту можно использовать в контейнере, чтобы указать несколько портов надо указать их через пробел

#### Инструкция `CMD` она устанавливает дефолтную команду при запуске контейнера



# Чтобы собрать Dockerfile используем следующую команду
`build -t <Название образа>:<тег докерфайла>  <путь где лежит докерфайл>`


## Аргументы  сборки

С помощью этих аргументов можно что либо менять, если не задать этот аргумент при сборке образа, то возьмется дефолтный, заданный в докерфайле


#### Использование флага ​--build-arg​ при сборке образа: 
`--build-arg [NAME]=[VALUE]`

#### Использование инструкции ​ARG​ в Dockerfile: 
`ARG [NAME]=[DEFAULT_VALUE]`


## Работа с непривилегироваными пользователями
Благодаря этой инструкции контейнер, запускаемый из образ где указан `USER` будет запускаться от этого юзера

В докер файле используется конструкция `USER`
При сборке можно указать при помощи `-u <Номер пользователя>`
Обычно рут под номером 0


## Монтирование томов в Dockerfile

`VOLUME ["папка где лежит том"]`    - Монтирование тома в докерфайле


# Остальные нюансы сборки образов
[[Образы докер]]

`-f Dockerfile.название` позволяет указать докерфайл который мы хотим использовать

`--rm`  - Удалит все ненужные контейнеры, которые создались в процессе сборки
